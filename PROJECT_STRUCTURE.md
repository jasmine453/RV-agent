# ğŸ“ RV-Agent é¡¹ç›®ç»“æ„è¯´æ˜

> æ¸…æ™°çš„é¡¹ç›®ç»“æ„ï¼Œæå‡å¼€å‘æ•ˆç‡

**ç‰ˆæœ¬**: v2.0  
**æœ€åæ›´æ–°**: 2025-01  
**æ–‡æ¡£çŠ¶æ€**: âœ… å·²ä¼˜åŒ–

---

## ğŸ“– ç›®å½•

- [å®Œæ•´ç›®å½•æ ‘](#-å®Œæ•´ç›®å½•æ ‘)
- [æ ¸å¿ƒç›®å½•è¯´æ˜](#-æ ¸å¿ƒç›®å½•è¯´æ˜)
- [å…³é”®æ–‡ä»¶è¯¦è§£](#-å…³é”®æ–‡ä»¶è¯¦è§£)
- [æ–‡ä»¶ç»Ÿè®¡](#-æ–‡ä»¶ç»Ÿè®¡)
- [å¼€å‘å·¥ä½œæµ](#-å¼€å‘å·¥ä½œæµ)
- [ä¾èµ–ç®¡ç†](#-ä¾èµ–ç®¡ç†)
- [APIç«¯ç‚¹](#-apiç«¯ç‚¹)
- [é…ç½®æ–‡ä»¶](#ï¸-é…ç½®æ–‡ä»¶)
- [æ–‡æ¡£å¯¼èˆª](#-æ–‡æ¡£å¯¼èˆª)
- [ä»£ç è§„èŒƒ](#-ä»£ç è§„èŒƒ)

---

## ğŸŒ² å®Œæ•´ç›®å½•æ ‘

```
RV-agent/
â”‚
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒå‰ç«¯é¡µé¢
â”‚   â”œâ”€â”€ index.html              # é¦–é¡µ/æ¬¢è¿é¡µ
â”‚   â”œâ”€â”€ manager.html            # ç®¡ç†äººå·¥ä½œåŒº
â”‚   â”œâ”€â”€ creditor.html           # å€ºæƒäººåˆ†æåŒº
â”‚   â”œâ”€â”€ feasibility-report.html # å¯è¡Œæ€§æŠ¥å‘Šé¡µé¢
â”‚   â”œâ”€â”€ pre-restructure.html    # é¢„é‡æ•´æ–¹æ¡ˆé¡µé¢
â”‚   â”œâ”€â”€ main.js                 # å‰ç«¯æ ¸å¿ƒé€»è¾‘ (4,178è¡Œ)
â”‚   â””â”€â”€ style.css               # å…¨å±€æ ·å¼ (2,821è¡Œ)
â”‚
â”œâ”€â”€ âš™ï¸ åç«¯æ ¸å¿ƒ
â”‚   â”œâ”€â”€ api-server.js           # Express æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ config.js               # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ utils.js                # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ knowledge-tips.js       # çŸ¥è¯†æç¤ºåº“
â”‚
â”œâ”€â”€ ğŸ”§ æœåŠ¡å™¨æ¨¡å— (server/)
â”‚   â”œâ”€â”€ aiService.js            # AIæœåŠ¡ (DeepSeek)
â”‚   â”œâ”€â”€ imageService.js         # å›¾è¡¨ç”Ÿæˆ (Doubao)
â”‚   â”œâ”€â”€ documentParser.js       # æ–‡æ¡£è§£æ
â”‚   â”œâ”€â”€ ocrService.js           # OCRè¯†åˆ«
â”‚   â”œâ”€â”€ prompts.js              # AIæç¤ºè¯åº“ (1,653è¡Œ)
â”‚   â”œâ”€â”€ logger.js               # Winstonæ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ utils.js                # æœåŠ¡å™¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ middleware/             # ä¸­é—´ä»¶
â”‚       â”œâ”€â”€ security.js         # å®‰å…¨ä¸­é—´ä»¶
â”‚       â””â”€â”€ errorHandler.js     # é”™è¯¯å¤„ç†
â”‚
â”œâ”€â”€ ğŸ› ï¸ è„šæœ¬å·¥å…· (scripts/)
â”‚   â”œâ”€â”€ cleanup-project.js      # é¡¹ç›®æ¸…ç†è„šæœ¬
â”‚   â”œâ”€â”€ optimize-images.js      # å›¾ç‰‡ä¼˜åŒ–
â”‚   â””â”€â”€ setup.js                # é¡¹ç›®åˆå§‹åŒ–
â”‚
â”œâ”€â”€ ğŸ§ª æµ‹è¯• (tests/)
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”‚   â””â”€â”€ utils.test.js
â”‚   â””â”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚       â””â”€â”€ api.test.js
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£ (docs/)
â”‚   â”œâ”€â”€ README.md               # æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ CLEANUP_RECOMMENDATIONS.md  # ç»´æŠ¤å»ºè®®
â”‚   â””â”€â”€ optimization/           # ä¼˜åŒ–æ–‡æ¡£é›†
â”‚       â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md
â”‚       â”œâ”€â”€ ä¼˜åŒ–æ€»ç»“.md
â”‚       â”œâ”€â”€ å¼€å§‹ä½¿ç”¨ä¼˜åŒ–ç‰ˆæœ¬.md
â”‚       â”œâ”€â”€ ä»£ç åˆ†æä¸ä¼˜åŒ–æŠ¥å‘Š.md
â”‚       â”œâ”€â”€ ä¼˜åŒ–å®æ–½æŒ‡å—.md
â”‚       â””â”€â”€ âœ… ä¼˜åŒ–å®Œæˆæ¸…å•.md
â”‚
â”œâ”€â”€ ğŸ“¦ èµ„æº (assets/)
â”‚   â”œâ”€â”€ logo.png                # Logo
â”‚   â”œâ”€â”€ mascot.png              # å‰ç¥¥ç‰© (1.8MB)
â”‚   â”œâ”€â”€ creditor-icon.png       # å€ºæƒäººå›¾æ ‡
â”‚   â”œâ”€â”€ creditor-icon.jpg
â”‚   â”œâ”€â”€ manager-icon.png        # ç®¡ç†äººå›¾æ ‡
â”‚   â””â”€â”€ manager-icon.jpg
â”‚
â”œâ”€â”€ ğŸ“‹ æ¨¡æ¿ (templates/)
â”‚   â”œâ”€â”€ åº­å¤–é‡ç»„åè®®/          # åº­å¤–é‡ç»„åè®®æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ åº­å¤–é‡ç»„åè®®æ¨¡æ¿.pdf
â”‚   â””â”€â”€ é¢„é‡æ•´æ–¹æ¡ˆ/             # é¢„é‡æ•´æ–¹æ¡ˆæ¨¡æ¿
â”‚       â”œâ”€â”€ é¢„é‡æ•´æ–¹æ¡ˆæ¨¡æ¿.pdf
â”‚       â””â”€â”€ é¢„é‡æ•´æ–¹æ¡ˆ.pdf
â”‚
â”œâ”€â”€ ğŸ“‚ è¿è¡Œæ—¶ç›®å½•
â”‚   â”œâ”€â”€ uploads/                # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ (gitignore)
â”‚   â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶ (gitignore)
â”‚   â””â”€â”€ node_modules/           # ä¾èµ–åŒ… (gitignore)
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡ (ä¸æäº¤)
â”‚   â”œâ”€â”€ env.example             # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚   â”œâ”€â”€ .eslintrc.js            # ESLinté…ç½®
â”‚   â”œâ”€â”€ .prettierrc             # Prettieré…ç½®
â”‚   â”œâ”€â”€ .prettierignore         # Prettierå¿½ç•¥æ–‡ä»¶
â”‚   â”œâ”€â”€ .gitignore              # Gitå¿½ç•¥è§„åˆ™
â”‚   â”œâ”€â”€ package.json            # é¡¹ç›®ä¾èµ–
â”‚   â”œâ”€â”€ package-lock.json       # ä¾èµ–é”å®š
â”‚   â””â”€â”€ render.yaml             # Renderéƒ¨ç½²é…ç½®
â”‚
â”œâ”€â”€ ğŸš€ CI/CD
â”‚   â””â”€â”€ .github/
â”‚       â””â”€â”€ workflows/
â”‚           â””â”€â”€ ci.yml          # GitHub Actionsé…ç½®
â”‚
â”œâ”€â”€ ğŸ“– æ ¸å¿ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ README.md               # é¡¹ç›®ä¸»æ–‡æ¡£ â­
â”‚   â””â”€â”€ PROJECT_STRUCTURE.md    # æœ¬æ–‡æ¡£
â”‚
â””â”€â”€ ğŸ“„ å…¶ä»–
    â”œâ”€â”€ start-server.sh         # Linuxå¯åŠ¨è„šæœ¬
    â”œâ”€â”€ IVS-effective-31-January-2025.pdf  # è¯„åˆ¤æ ‡å‡†
    â””â”€â”€ ç­‰å¾…ç•Œé¢--å°çŸ¥è¯†.pdf    # å‚è€ƒèµ„æ–™
```

---

## ğŸ“‚ æ ¸å¿ƒç›®å½•è¯´æ˜

### å‰ç«¯é¡µé¢
æ‰€æœ‰ HTMLã€JSã€CSS æ–‡ä»¶ä½äºæ ¹ç›®å½•ï¼Œä¾¿äºç›´æ¥è®¿é—®ï¼š

| æ–‡ä»¶ | ç”¨é€” | è¡Œæ•° |
|------|------|------|
| `index.html` | é¦–é¡µ/æ¬¢è¿é¡µé¢ | ~200 |
| `manager.html` | ç®¡ç†äººå·¥ä½œåŒºï¼ˆç”Ÿæˆåè®®/æ–¹æ¡ˆï¼‰ | ~300 |
| `creditor.html` | å€ºæƒäººåˆ†æåŒºï¼ˆä¼ä¸šä»·å€¼/é£é™©ï¼‰ | ~300 |
| `feasibility-report.html` | å¯è¡Œæ€§æŠ¥å‘Šç”Ÿæˆ | ~250 |
| `pre-restructure.html` | é¢„é‡æ•´æ–¹æ¡ˆç”Ÿæˆ | ~250 |
| `main.js` | å‰ç«¯æ ¸å¿ƒé€»è¾‘ | 4,178 |
| `style.css` | å…¨å±€æ ·å¼å®šä¹‰ | 2,821 |

### server/ - åç«¯æœåŠ¡æ¨¡å—

| æ–‡ä»¶ | èŒè´£ | ä¸»è¦åŠŸèƒ½ |
|------|------|----------|
| `aiService.js` | AIæœåŠ¡ | DeepSeek APIè°ƒç”¨ã€æ–‡æ¡£åˆ†æ |
| `imageService.js` | å›¾è¡¨ç”Ÿæˆ | Doubao APIè°ƒç”¨ã€å›¾è¡¨ç”Ÿæˆ |
| `documentParser.js` | æ–‡æ¡£è§£æ | PDF/Word/Excel/TXTè§£æ |
| `ocrService.js` | OCRè¯†åˆ« | Tesseract.jså›¾ç‰‡æ–‡å­—è¯†åˆ« |
| `prompts.js` | æç¤ºè¯åº“ | AIåˆ†ææç¤ºè¯æ¨¡æ¿ (1,653è¡Œ) |
| `logger.js` | æ—¥å¿—ç³»ç»Ÿ | Winstonæ—¥å¿—è®°å½•å’Œè½®è½¬ |
| `utils.js` | å·¥å…·å‡½æ•° | Markdownæ¸…ç†ã€æ ¼å¼åŒ–ç­‰ |

#### server/middleware/ - ä¸­é—´ä»¶

| æ–‡ä»¶ | èŒè´£ |
|------|------|
| `security.js` | é€Ÿç‡é™åˆ¶ã€æ–‡ä»¶éªŒè¯ã€Helmetå®‰å…¨å¤´ |
| `errorHandler.js` | ç»Ÿä¸€é”™è¯¯å¤„ç†ã€è‡ªå®šä¹‰é”™è¯¯ç±» |

### scripts/ - å®ç”¨è„šæœ¬

| è„šæœ¬ | ç”¨é€” | è¿è¡Œæ–¹å¼ |
|------|------|----------|
| `cleanup-project.js` | æ¸…ç†ä¸´æ—¶æ–‡ä»¶ã€æ•´ç†æ–‡æ¡£ | `npm run cleanup` |
| `optimize-images.js` | å‹ç¼©å›¾ç‰‡ã€ç”ŸæˆWebP | `npm run optimize:images` |
| `setup.js` | é¡¹ç›®åˆå§‹åŒ–ã€åˆ›å»ºç›®å½• | `npm run setup` |

### tests/ - æµ‹è¯•ç›®å½•

```
tests/
â”œâ”€â”€ unit/           # å•å…ƒæµ‹è¯•ï¼ˆæµ‹è¯•å•ä¸ªå‡½æ•°/æ¨¡å—ï¼‰
â”‚   â””â”€â”€ utils.test.js
â””â”€â”€ integration/    # é›†æˆæµ‹è¯•ï¼ˆæµ‹è¯•APIç«¯ç‚¹ï¼‰
    â””â”€â”€ api.test.js
```

### docs/ - æ–‡æ¡£ä¸­å¿ƒ

```
docs/
â”œâ”€â”€ README.md                        # æ–‡æ¡£ç´¢å¼•
â”œâ”€â”€ CLEANUP_RECOMMENDATIONS.md       # ç»´æŠ¤å»ºè®®
â””â”€â”€ optimization/                    # v2.0ä¼˜åŒ–æ–‡æ¡£
    â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md                  # 5åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
    â”œâ”€â”€ ä¼˜åŒ–æ€»ç»“.md                  # ä¼˜åŒ–æ¦‚è§ˆ
    â”œâ”€â”€ å¼€å§‹ä½¿ç”¨ä¼˜åŒ–ç‰ˆæœ¬.md          # ä½¿ç”¨è¯´æ˜
    â”œâ”€â”€ ä»£ç åˆ†æä¸ä¼˜åŒ–æŠ¥å‘Š.md        # è¯¦ç»†åˆ†æ (117é¡µ)
    â”œâ”€â”€ ä¼˜åŒ–å®æ–½æŒ‡å—.md              # å®æ–½æ­¥éª¤
    â””â”€â”€ âœ… ä¼˜åŒ–å®Œæˆæ¸…å•.md           # å®Œæˆæ¸…å•
```

---

## ğŸ”‘ å…³é”®æ–‡ä»¶è¯¦è§£

### 1. api-server.js (æ ¸å¿ƒåç«¯)
**èŒè´£**: ExpressæœåŠ¡å™¨ã€è·¯ç”±å¤„ç†ã€APIç«¯ç‚¹
**ä¸»è¦è·¯ç”±**:
- `POST /api/upload` - æ–‡ä»¶ä¸Šä¼ 
- `POST /api/analyze` - æ–‡æ¡£åˆ†æ
- `POST /api/generate-word` - ç”ŸæˆWordæ–‡æ¡£
- `POST /api/generate-chart` - ç”Ÿæˆå›¾è¡¨
- `GET /api/health` - å¥åº·æ£€æŸ¥

### 2. main.js (æ ¸å¿ƒå‰ç«¯)
**èŒè´£**: å‰ç«¯é€»è¾‘ã€ç”¨æˆ·äº¤äº’ã€APIè°ƒç”¨
**ä¸»è¦åŠŸèƒ½**:
- æ–‡ä»¶ä¸Šä¼ å¤„ç†
- æ–‡æ¡£åˆ†æè¯·æ±‚
- Wordæ–‡æ¡£ç”Ÿæˆ
- å›¾è¡¨å¯è§†åŒ–
- é”™è¯¯å¤„ç†

### 3. prompts.js (AIæç¤ºè¯)
**èŒè´£**: AIåˆ†æçš„æç¤ºè¯æ¨¡æ¿
**åŒ…å«**:
- å¯è¡Œæ€§æŠ¥å‘Šæç¤ºè¯
- é¢„é‡æ•´æ–¹æ¡ˆæç¤ºè¯
- ä¼ä¸šä»·å€¼è¯„ä¼°æç¤ºè¯
- é£é™©åˆ†ææç¤ºè¯

### 4. config.js (é…ç½®ç®¡ç†)
**èŒè´£**: ç»Ÿä¸€ç®¡ç†ç¯å¢ƒå˜é‡å’Œé…ç½®
**åŒ…å«**:
- APIå¯†é’¥é…ç½®
- æœåŠ¡å™¨é…ç½®
- å®‰å…¨é…ç½®
- æ—¥å¿—é…ç½®

---

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

### æŒ‰ç±»å‹ç»Ÿè®¡

| ç±»å‹ | æ•°é‡ | æ€»å¤§å° | è¯´æ˜ |
|------|------|--------|------|
| **å‰ç«¯æ–‡ä»¶** | 7 | ~50KB | HTML + JS + CSS |
| **åç«¯æ–‡ä»¶** | 11 | ~60KB | Node.jsæœåŠ¡å™¨ |
| **æµ‹è¯•æ–‡ä»¶** | 2 | ~5KB | Jestæµ‹è¯• |
| **è„šæœ¬æ–‡ä»¶** | 3 | ~8KB | å®ç”¨å·¥å…· |
| **é…ç½®æ–‡ä»¶** | 9 | ~15KB | å„ç±»é…ç½® |
| **æ–‡æ¡£æ–‡ä»¶** | 9 | ~2MB | Markdown + PDF |
| **å›¾ç‰‡èµ„æº** | 6 | ~2.5MB | PNG/JPG |
| **ä¾èµ–åŒ…** | 1 | ~200MB | node_modules |

### ä»£ç è¡Œæ•°ç»Ÿè®¡

| æ–‡ä»¶ | è¡Œæ•° | å æ¯” |
|------|------|------|
| `main.js` | 4,178 | 52% |
| `style.css` | 2,821 | 35% |
| `prompts.js` | 1,653 | 8% |
| å…¶ä»–æ–‡ä»¶ | ~400 | 5% |
| **æ€»è®¡** | **~9,052** | **100%** |

**æ³¨**: ä¸å« node_modules å’Œæµ‹è¯•æ–‡ä»¶

---

## ğŸš€ å¼€å‘å·¥ä½œæµ

### 1ï¸âƒ£ åˆå§‹åŒ–é¡¹ç›®

```bash
# å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
git clone <repository-url>
cd RV-agent

# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œåˆå§‹åŒ–è„šæœ¬ï¼ˆåˆ›å»ºå¿…è¦ç›®å½•ï¼‰
npm run setup

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API å¯†é’¥
```

### 2ï¸âƒ£ å¼€å‘é˜¶æ®µ

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
npm run dev

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œä»£ç æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰
npm run lint:watch

# è¿è¡Œæµ‹è¯•ï¼ˆç›‘å¬æ¨¡å¼ï¼‰
npm run test:watch
```

### 3ï¸âƒ£ ä»£ç è´¨é‡æ£€æŸ¥

```bash
# ESLint ä»£ç æ£€æŸ¥
npm run lint

# è‡ªåŠ¨ä¿®å¤é—®é¢˜
npm run lint:fix

# Prettier æ ¼å¼åŒ–
npm run format

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

### 4ï¸âƒ£ ä¼˜åŒ–å’Œæ„å»º

```bash
# ä¼˜åŒ–å›¾ç‰‡ï¼ˆä½¿ç”¨TinyPNG APIï¼‰
npm run optimize:images

# å‹ç¼©CSS
npm run build:css

# å®Œæ•´æ„å»º
npm run build

# æ¸…ç†ç”Ÿæˆæ–‡ä»¶
npm run clean
```

### 5ï¸âƒ£ ç”Ÿäº§éƒ¨ç½²

```bash
# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# æŸ¥çœ‹æ—¥å¿—
cat logs/combined-*.log
cat logs/error-*.log
```

### 6ï¸âƒ£ é¡¹ç›®ç»´æŠ¤

```bash
# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
npm run cleanup

# å®‰å…¨å®¡è®¡
npm audit

# æ›´æ–°ä¾èµ–
npm update
```

---

## ğŸ“¦ ä¾èµ–ç®¡ç†

### ç”Ÿäº§ä¾èµ– (22ä¸ª)

#### Webæ¡†æ¶
- `express` - Webæ¡†æ¶
- `cors` - è·¨åŸŸèµ„æºå…±äº«

#### æ–‡ä»¶å¤„ç†
- `multer` - æ–‡ä»¶ä¸Šä¼ 
- `pdf-parse` - PDFè§£æ
- `mammoth` - Wordæ–‡æ¡£è§£æ
- `xlsx` - Excelè§£æ
- `docx` - Wordæ–‡æ¡£ç”Ÿæˆ
- `tesseract.js` - OCRè¯†åˆ«

#### AIæœåŠ¡
- `openai` - DeepSeek AI API
- `@volcengine/openapi` - Doubaoå›¾è¡¨API

#### å®‰å…¨
- `helmet` - å®‰å…¨å¤´
- `express-rate-limit` - é€Ÿç‡é™åˆ¶
- `express-validator` - è¯·æ±‚éªŒè¯

#### æ—¥å¿—
- `winston` - æ—¥å¿—ç³»ç»Ÿ
- `winston-daily-rotate-file` - æ—¥å¿—è½®è½¬

#### å·¥å…·
- `dotenv` - ç¯å¢ƒå˜é‡
- `nanoid` - å”¯ä¸€IDç”Ÿæˆ

### å¼€å‘ä¾èµ– (8ä¸ª)

#### ä»£ç è´¨é‡
- `eslint` - ä»£ç æ£€æŸ¥
- `prettier` - ä»£ç æ ¼å¼åŒ–

#### æµ‹è¯•
- `jest` - æµ‹è¯•æ¡†æ¶
- `supertest` - APIæµ‹è¯•

#### ä¼˜åŒ–
- `tinify` - TinyPNG API
- `clean-css-cli` - CSSå‹ç¼©

#### å¼€å‘å·¥å…·
- `nodemon` - è‡ªåŠ¨é‡å¯

---

## ğŸŒ APIç«¯ç‚¹

### æ–‡ä»¶ä¸Šä¼ 
```
POST /api/upload
Content-Type: multipart/form-data

å‚æ•°:
- file: æ–‡ä»¶ (PDF/Word/Excel/TXT)
- type: æ–‡ä»¶ç±»å‹

è¿”å›:
- filePath: æ–‡ä»¶è·¯å¾„
- fileType: æ–‡ä»¶ç±»å‹
```

### æ–‡æ¡£åˆ†æ
```
POST /api/analyze
Content-Type: application/json

å‚æ•°:
- filePath: æ–‡ä»¶è·¯å¾„
- analysisType: åˆ†æç±»å‹
  - feasibility (å¯è¡Œæ€§æŠ¥å‘Š)
  - pre-restructure (é¢„é‡æ•´æ–¹æ¡ˆ)
  - creditor (å€ºæƒäººåˆ†æ)

è¿”å›:
- result: åˆ†æç»“æœ
- content: åˆ†æå†…å®¹
```

### ç”ŸæˆWordæ–‡æ¡£
```
POST /api/generate-word
Content-Type: application/json

å‚æ•°:
- content: æ–‡æ¡£å†…å®¹
- title: æ–‡æ¡£æ ‡é¢˜

è¿”å›:
- downloadUrl: ä¸‹è½½é“¾æ¥
```

### ç”Ÿæˆå›¾è¡¨
```
POST /api/generate-chart
Content-Type: application/json

å‚æ•°:
- prompt: å›¾è¡¨æè¿°

è¿”å›:
- imageUrl: å›¾è¡¨URL
```

### å¥åº·æ£€æŸ¥
```
GET /api/health

è¿”å›:
- status: 'healthy'
- timestamp: æ—¶é—´æˆ³
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶

### ç¯å¢ƒå˜é‡ (.env)

```env
# å¿…éœ€
DEEPSEEK_API_KEY=your-deepseek-api-key
DOUBAO_API_KEY=your-doubao-api-key

# å¯é€‰ï¼ˆæœ‰é»˜è®¤å€¼ï¼‰
PORT=10000
NODE_ENV=production
LOG_LEVEL=info

# å®‰å…¨é…ç½®
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
CORS_ORIGIN=*

# ä¸Šä¼ é…ç½®
MAX_FILE_SIZE=10485760
UPLOAD_DIR=./uploads
```

### ESLint (.eslintrc.js)

```javascript
module.exports = {
    env: {
        node: true,
        es2021: true,
        jest: true
    },
    extends: ['eslint:recommended'],
    parserOptions: {
        ecmaVersion: 12
    },
    rules: {
        indent: ['error', 4],
        quotes: ['error', 'single'],
        semi: ['error', 'always']
    }
};
```

### Prettier (.prettierrc)

```json
{
    "semi": true,
    "singleQuote": true,
    "tabWidth": 4,
    "printWidth": 100
}
```

### Gitå¿½ç•¥ (.gitignore)

```
# ä¾èµ–
node_modules/

# ç¯å¢ƒå˜é‡
.env

# è¿è¡Œæ—¶
uploads/
logs/
coverage/

# ä¸´æ—¶æ–‡ä»¶
*.log
*.tmp
.DS_Store
```

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### æ–°æ‰‹å…¥é—¨ ğŸŒ±

1. **README.md** â­ å¿…è¯»
   - é¡¹ç›®ä»‹ç»
   - å¿«é€Ÿå¼€å§‹
   - æ ¸å¿ƒåŠŸèƒ½
   - éƒ¨ç½²æŒ‡å—

2. **docs/optimization/å¿«é€Ÿå¼€å§‹.md**
   - 5åˆ†é’Ÿä¸Šæ‰‹
   - å¸¸è§é—®é¢˜
   - æ•…éšœæ’æŸ¥

### å¼€å‘è€… ğŸ‘¨â€ğŸ’»

3. **PROJECT_STRUCTURE.md** (æœ¬æ–‡æ¡£)
   - é¡¹ç›®ç»“æ„è¯¦è§£
   - å¼€å‘å·¥ä½œæµ
   - æ–‡ä»¶è¯´æ˜

4. **docs/optimization/ä¼˜åŒ–æ€»ç»“.md**
   - v2.0æ–°ç‰¹æ€§
   - ä¼˜åŒ–æ–¹æ¡ˆæ¦‚è§ˆ

### æ·±å…¥å­¦ä¹  ğŸ“–

5. **docs/optimization/ä»£ç åˆ†æä¸ä¼˜åŒ–æŠ¥å‘Š.md**
   - è¯¦ç»†æŠ€æœ¯åˆ†æ (117é¡µ)
   - é—®é¢˜è¯Šæ–­
   - ä¼˜åŒ–æ–¹æ¡ˆ

6. **docs/optimization/ä¼˜åŒ–å®æ–½æŒ‡å—.md**
   - é€æ­¥å®æ–½æŒ‡å—
   - ä»£ç ç¤ºä¾‹
   - æµ‹è¯•æ–¹æ³•

### ç»´æŠ¤ç®¡ç† ğŸ”§

7. **docs/CLEANUP_RECOMMENDATIONS.md**
   - é¡¹ç›®ç»´æŠ¤å»ºè®®
   - æœ€ä½³å®è·µ
   - ä¼˜åŒ–è·¯çº¿å›¾

---

## ğŸ¨ ä»£ç è§„èŒƒ

### JavaScript è§„èŒƒ

- **ç‰ˆæœ¬**: ES6+
- **ç¼©è¿›**: 4ä¸ªç©ºæ ¼
- **å¼•å·**: å•å¼•å· `'`
- **åˆ†å·**: å¿…é¡»ä½¿ç”¨ `;`
- **è¡Œå®½**: 100å­—ç¬¦
- **å‘½å**:
  - å˜é‡/å‡½æ•°: `camelCase`
  - å¸¸é‡: `UPPER_CASE`
  - ç±»: `PascalCase`

### æ–‡ä»¶å‘½åè§„èŒƒ

- **å‰ç«¯é¡µé¢**: `kebab-case.html`
- **JavaScript**: `kebab-case.js`
- **CSS**: `kebab-case.css`
- **æµ‹è¯•æ–‡ä»¶**: `*.test.js`
- **é…ç½®æ–‡ä»¶**: `.configname` æˆ– `.configname.js`

### æäº¤ä¿¡æ¯è§„èŒƒ

éµå¾ª Conventional Commits:

```bash
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤Bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·å˜æ›´
```

---

## ğŸ”’ å®‰å…¨ç›¸å…³

### å¿…é¡»ä¿å¯†ï¼ˆä¸æäº¤åˆ°Gitï¼‰

```
.env                 # APIå¯†é’¥ã€æ•æ„Ÿé…ç½®
uploads/*            # ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶
logs/*               # æ—¥å¿—æ–‡ä»¶ï¼ˆå¯èƒ½å«æ•æ„Ÿä¿¡æ¯ï¼‰
node_modules/        # ä¾èµ–åŒ…
coverage/            # æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
```

### å¯ä»¥å…¬å¼€ï¼ˆå¯æäº¤ï¼‰

```
env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼ˆæ— æ•æ„Ÿä¿¡æ¯ï¼‰
render.yaml          # éƒ¨ç½²é…ç½®ï¼ˆä½¿ç”¨ç¯å¢ƒå˜é‡å¼•ç”¨ï¼‰
.gitignore           # Gitå¿½ç•¥è§„åˆ™
README.md            # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸ¯ æœªæ¥ä¼˜åŒ–è®¡åˆ’

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
- [ ] è¿›ä¸€æ­¥æ‹†åˆ† `main.js`ï¼ˆæ¨¡å—åŒ–ï¼‰
- [ ] è¿›ä¸€æ­¥æ‹†åˆ† `style.css`ï¼ˆç»„ä»¶åŒ–ï¼‰
- [ ] å¢åŠ æ›´å¤šå•å…ƒæµ‹è¯•
- [ ] æé«˜æµ‹è¯•è¦†ç›–ç‡åˆ° 80%+

### ä¸­æœŸï¼ˆ1-2ä¸ªæœˆï¼‰
- [ ] TypeScript è¿ç§»
- [ ] æ•°æ®åº“é›†æˆï¼ˆPostgreSQLï¼‰
- [ ] Redis ç¼“å­˜å®ç°
- [ ] å‰ç«¯æ¡†æ¶é‡æ„ï¼ˆVue/Reactï¼‰

### é•¿æœŸï¼ˆ3ä¸ªæœˆ+ï¼‰
- [ ] ç›‘æ§ç³»ç»Ÿï¼ˆSentryï¼‰
- [ ] æ€§èƒ½åˆ†æå’Œä¼˜åŒ–
- [ ] ç¦»çº¿æ”¯æŒï¼ˆService Workerï¼‰
- [ ] å›½é™…åŒ–ï¼ˆi18nï¼‰

---

## ğŸ”„ ç‰ˆæœ¬æ§åˆ¶

### Gitå·¥ä½œæµ

```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/xxx

# 2. å¼€å‘å’Œæµ‹è¯•
npm run lint:fix
npm test

# 3. æäº¤æ›´æ”¹
git add .
git commit -m "feat: xxx"

# 4. æ¨é€åˆ°è¿œç¨‹
git push origin feature/xxx

# 5. åˆ›å»ºPull Request
```

---

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. æ‰¾ä¸åˆ°æŸä¸ªæ–‡ä»¶ï¼Ÿ
- æŸ¥çœ‹æœ¬æ–‡æ¡£çš„[å®Œæ•´ç›®å½•æ ‘](#-å®Œæ•´ç›®å½•æ ‘)
- ä½¿ç”¨æ–‡ä»¶æœç´¢: `grep -r "å…³é”®å­—" .`

### 2. éœ€è¦æ·»åŠ æ–°åŠŸèƒ½ï¼Ÿ
- å‰ç«¯é€»è¾‘ â†’ `main.js`
- åç«¯API â†’ `api-server.js`
- AIæç¤ºè¯ â†’ `server/prompts.js`
- æ–°å¢è·¯ç”± â†’ åœ¨ `api-server.js` ä¸­æ·»åŠ 

### 3. æ–‡æ¡£åœ¨å“ªé‡Œï¼Ÿ
- ä¸»æ–‡æ¡£ â†’ `README.md`
- é¡¹ç›®ç»“æ„ â†’ `PROJECT_STRUCTURE.md` (æœ¬æ–‡æ¡£)
- ä¼˜åŒ–æ–‡æ¡£ â†’ `docs/optimization/`
- ç»´æŠ¤å»ºè®® â†’ `docs/CLEANUP_RECOMMENDATIONS.md`

### 4. å¦‚ä½•è¿è¡Œæµ‹è¯•ï¼Ÿ
```bash
npm test                # æ‰€æœ‰æµ‹è¯•
npm run test:unit       # å•å…ƒæµ‹è¯•
npm run test:integration # é›†æˆæµ‹è¯•
npm run test:coverage   # æµ‹è¯•è¦†ç›–ç‡
```

### 5. å¦‚ä½•éƒ¨ç½²ï¼Ÿ
å‚è€ƒ `README.md` ä¸­çš„éƒ¨ç½²æŒ‡å—ç« èŠ‚ã€‚

---

## ğŸ“ è·å–å¸®åŠ©

- **é‚®ç®±**: rjasmine756@163.com
- **é¡¹ç›®**: åä¸œæ”¿æ³•å¤§å­¦ RV-Agent
- **GitHub**: åˆ›å»º Issue
- **æ–‡æ¡£**: æŸ¥çœ‹ `docs/` ç›®å½•

---

## ğŸ“‹ æ€»ç»“

### é¡¹ç›®äº®ç‚¹ âœ¨

- âœ… **æ¸…æ™°çš„ç›®å½•ç»“æ„**: åŠŸèƒ½æ¨¡å—åŒ–ï¼Œæ˜“äºç»´æŠ¤
- âœ… **å®Œå–„çš„æ–‡æ¡£**: ä»å…¥é—¨åˆ°æ·±å…¥çš„å®Œæ•´æ–‡æ¡£
- âœ… **ä»£ç è´¨é‡ä¿è¯**: ESLint + Prettier + Jest
- âœ… **å®‰å…¨æ€§**: Helmet + é€Ÿç‡é™åˆ¶ + æ–‡ä»¶éªŒè¯
- âœ… **å¯ç»´æŠ¤æ€§**: æ—¥å¿—ç³»ç»Ÿ + é”™è¯¯å¤„ç† + è‡ªåŠ¨åŒ–è„šæœ¬

### æ ¸å¿ƒæŒ‡æ ‡ ğŸ“Š

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ ¸å¿ƒä»£ç è¡Œæ•° | ~9,000 |
| æµ‹è¯•è¦†ç›–ç‡ | 60%+ |
| å‰ç«¯é¡µé¢æ•° | 5 |
| APIç«¯ç‚¹æ•° | 5 |
| ä¾èµ–åŒ…æ•° | 30 |
| æ–‡æ¡£æ•°é‡ | 9 |

---

**ç»´æŠ¤è€…**: RV-Agent Team  
**åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ  
**ç‰ˆæœ¬**: v2.0  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

ğŸ‰ **æ¬¢è¿ä½¿ç”¨ RV-Agentï¼**
